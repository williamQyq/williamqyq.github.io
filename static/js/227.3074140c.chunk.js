/*! For license information please see 227.3074140c.chunk.js.LICENSE.txt */
(self.webpackChunkmern_project=self.webpackChunkmern_project||[]).push([[227],{20736:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var r=n(74165),i=n(93433),a=n(15861),o=n(1413),s=n(15671),c=n(43144),u=n(60136),l=n(27277),d=n(72791),p=n(78687),f=n(52007),h=n.n(f),g=n(77846),m=n(45863),y=n(49766),v=n(30563),Z=n(80184),x=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var c;return(0,s.Z)(this,n),(c=t.call(this,e)).formRef=d.createRef(),c.getAmzRecord=function(e){var t=[],n=e.identifiers.filter((function(e){return null!=e.offers})),r=0;n.forEach((function(e){e.offers.forEach((function(n){t.push((0,o.Z)((0,o.Z)({},n),{},{asin:e.asin,key:r})),r+=1}))})),c.setState({data:t})},c.isEditing=function(e){return e.key===c.state.editingKey},c.edit=function(e){c.formRef.current.setFieldsValue((0,o.Z)({},e)),c.setState({editingKey:e.key})},c.cancel=function(){c.setState({editingKey:""})},c.save=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,s,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.formRef.current.validateFields();case 3:n=e.sent,a=(0,i.Z)(c.state.data),s=a.findIndex((function(e){return t===e.key})),s>-1?(u=a[s],a.splice(s,1,(0,o.Z)((0,o.Z)({},u),n)),c.setState({data:a}),c.setState({editingKey:""})):(a.push(n),c.setState({newData:a}),c.setState({editingKey:""})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),c.state={editingKey:"",data:[]},c}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){this.getAmzRecord(this.props.record)}},{key:"render",value:function(){var e={isEditing:this.isEditing,edit:this.edit,cancel:this.cancel,save:this.save,editingKey:this.state.editingKey},t=(0,v.Qv)(e),n=this.state.data;return(0,Z.jsx)(g.Z,{ref:this.formRef,component:!1,children:(0,Z.jsx)(y.Z,{components:{body:{cell:v.nK}},columns:t,dataSource:n,pagination:!1})})}}]),n}(d.Component),b=m.Z.Title,R={bordered:!0,showHeader:!0,hasData:!0,scroll:{},yScroll:!0,size:"default",top:"topRight",bottom:"bottomRight",rowKey:"_id",tableLayout:"fixed",title:function(){return(0,Z.jsx)(b,{level:4,children:"All Products"})},footer:function(){return"Here is footer"},expandable:{expandRowByClick:!0,expandedRowRender:function(e){return(0,Z.jsx)(x,{record:e})}},pagination:{position:["topRight","bottomRight"]},components:{body:{cell:v.nK}}},S=n(31243),k=n(1025),j=n.n(k),P=n(34219),w=n(34796),K=n(6803),E=n(97922),T=function(e){return function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,a){var o,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.map((function(e){return e.upc})),t.next=3,S.Z.post("/api/wms/sellerInv/v0/quantity/upcs",{upcArr:o},(0,P.Y2)(a)).then((function(t){var n=new Map(t.data),r=(0,i.Z)(e);return r.forEach((function(e){e.wmsQuantity=n.get(e.upc)})),r}));case 3:return s=t.sent,t.abrupt("return",s);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},C=function(e){return function(t){var n=e.file,r=e.onSuccess,i=e.onError;t(_()),j().parse(n,{complete:function(e){var n=e.data;S.Z.post("/api/operation/upload/v0/asinsMapping",{uploadFile:n}).then((function(e){t({type:K.r3}),r(e.data.msg),t((0,E.h)(e.data.msg,e.status,K.r3))})).catch((function(e){i(e)}))},error:function(e){i(e)}})}},_=function(){return{type:K.UZ}},D=function(){return{type:K.JR}},O=n(29439),F=n(83388),I=n(66883),z=n(32358),U=n(37295),V=n(48430),A=function(e){var t=(0,d.useState)("upload"),n=(0,O.Z)(t,2),r=n[0],i=n[1],a=[{key:"upload",icon:(0,Z.jsx)(z.Z,{}),label:"Upload"}],o=[{title:(0,Z.jsx)(Z.Fragment,{}),key:"controller",children:[{key:"menu",title:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(F.Z,{onClick:function(e){return i(e.key)},selectedKeys:[r],mode:"horizontal",items:a}),function(e){if("upload"===e)return(0,Z.jsx)(V.Z,{customizedUpload:C})}(r)]})}]}];return(0,Z.jsx)(I.Z,{showIcon:!0,blockNode:!0,defaultSelectedKeys:["controller"],switcherIcon:(0,Z.jsx)(U.Z,{}),treeData:o})},L=n(11878),N=n(29205),q=n(93343),B=function(e){(0,u.Z)(n,e);var t=(0,l.Z)(n);function n(e){var c;return(0,s.Z)(this,n),(c=t.call(this,e)).isLoading=function(){return c.props.loading},c.isEditing=function(e){return e._id===c.state.editingKey},c.edit=function(e){c.formRef.current.setFieldsValue((0,o.Z)({},e)),c.setState({editingKey:e._id})},c.cancel=function(){c.setState({editingKey:""})},c.save=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,s,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.formRef.current.validateFields();case 3:n=e.sent,a=(0,i.Z)(c.props.sellingPartner),s=a.findIndex((function(e){return t===e.key})),s>-1?(u=a[s],a.splice(s,1,(0,o.Z)((0,o.Z)({},u),n)),c.setState({data:a}),c.setState({editingKey:""})):(a.push(n),c.setState({newData:a}),c.setState({editingKey:""})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Validate Failed:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),c.publish=function(e){},c.handleSearch=function(e,t,n){t(),c.setState({searchText:e[0],searchedColumn:n})},c.handleReset=function(e){e(),c.setState({searchText:""})},c.state={searchText:"",searchedRowId:"",searchedColumn:"",editingKey:"",data:[],defaultSettings:R},c.formRef=d.createRef(),c}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context;this.props.getProductPricing(),t&&t.active&&(t.emit("subscribe","OperationRoom"),t.on("Prod Pricing Update",(function(){e.props.getProductPricing()})))}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.sellingPartner;e!==this.props&&n.length>0&&this.setState({data:n})}},{key:"componentWillUnmount",value:function(){var e=this.context;e&&e.active&&e.emit("unsubscribe","OperationRoom")}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.defaultSettings,r=this.props.loading,i={isEditing:this.isEditing,edit:this.edit,cancel:this.cancel,save:this.save,publish:this.publish,editingKey:this.state.editingKey,handleSearch:this.handleSearch,handleReset:this.handleReset},a=(0,v.Bb)(i);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(q.yW,{title:"All Listed Products"}),(0,Z.jsx)(A,(0,o.Z)({},this.state)),(0,Z.jsx)(g.Z,{ref:this.formRef,component:!1,children:(0,Z.jsx)(N.Z,{loading:r,tableSettings:n,columns:a,data:t})}),(0,Z.jsx)(q.BB,{title:"New Products"})]})}}]),n}(d.Component);B.contextType=L.J,B.prototypes={getProductPricing:h().func.isRequired,sellingPartner:h().array.isRequired,loading:h().bool.isRequired};var M=(0,p.$j)((function(e){return{sellingPartner:e.amazon.sellingPartner,loading:e.amazon.loading}}),{getProductPricing:function(){return function(e,t){e(_()),S.Z.get("/api/operation/products/pricing/v0/price",(0,P.Y2)(t)).then((function(t){return e({type:K.Jy,payload:t.data}),t.data})).then((function(t){return e(T(t))})).then((function(t){e({type:K.oy,payload:t})})).then((function(){e(D())})).catch((function(t){t.response&&e((0,w.d)(t.response.data.msg,t.response.status))}))}}})(B)},48430:function(e,t,n){"use strict";var r=n(1413),i=(n(72791),n(98583)),a=n(46988),o=n(66776),s=n(78687),c=n(80184),u=i.Z.Dragger;t.Z=function(e){var t=e.customizedUpload,n=(0,s.I0)(),i={name:"file",multiple:!0,accept:".txt, .csv",onChange:function(e){var t=e.file,n=t.status,r=t.response,i=t.error;"uploading"!==n&&console.log(e.file,e.fileList),"done"===n?a.ZP.success("".concat(e.file.name," upload successful.\n").concat(r)):"error"===n&&a.ZP.error("".concat(e.file.name," upload failed.\n").concat(i))},customRequest:function(e){var r=e.file,i=e.onSuccess,a=e.onError;n(t({file:r,onSuccess:i,onError:a}))},onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)},beforeUpload:function(e,t){[]}};return(0,c.jsxs)(u,(0,r.Z)((0,r.Z)({},i),{},{children:[(0,c.jsx)("p",{className:"ant-upload-drag-icon",children:(0,c.jsx)(o.Z,{})}),(0,c.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,c.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"})]}))}},32358:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(1413),i=n(72791),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm-616-64h536c4.4 0 8-3.6 8-8V284c0-7.2-8.7-10.7-13.7-5.7L592 488.6l-125.4-124a8.03 8.03 0 00-11.3 0l-189 189.6a7.87 7.87 0 00-2.3 5.6V720c0 4.4 3.6 8 8 8z"}}]},name:"area-chart",theme:"outlined"},o=n(8711),s=function(e,t){return i.createElement(o.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:a}))};s.displayName="AreaChartOutlined";var c=i.forwardRef(s)},80888:function(e,t,n){"use strict";var r=n(79047);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},52007:function(e,t,n){e.exports=n(80888)()},79047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}]);
//# sourceMappingURL=227.3074140c.chunk.js.map