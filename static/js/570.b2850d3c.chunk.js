(self.webpackChunkmern_project=self.webpackChunkmern_project||[]).push([[570],{99552:function(e,t,n){"use strict";n.r(t),n.d(t,{categoryIdGroup:function(){return F},default:function(){return W}});var s=n(1413),r=n(15671),a=n(43144),o=n(60136),i=n(27277),c=n(72791),u=n(78687),l=n(97988),p=n(74165),d=n(15861),m=n(31243),h=n(72426),f=n.n(h),g=n(6803),y=n(34219),v=n(34796),b=function(){return{type:g.WA}},S=function(e){return function(){var t=(0,d.Z)((0,p.Z)().mark((function t(n,s){return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(L()),m.Z.get("/api/bestbuy/peek/v0/getViewedUltimatelyBought/sku/".concat(e),(0,y.Y2)(s)).then((function(e){n({type:g.k4,payload:e.data})})).catch((function(e){n(w()),n((0,v.d)(e.response.data.msg,e.response.status,g.Gl))}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},k=function(e){return function(){var t=(0,d.Z)((0,p.Z)().mark((function t(n,s){return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(L()),m.Z.get("/api/bestbuy/peek/v0/getAlsoBought/sku/".concat(e),(0,y.Y2)(s)).then((function(e){n({type:g.Wi,payload:e.data})})).catch((function(e){n(w()),n((0,v.d)(e.response.data.msg,e.response.status,g.Gl))}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},L=function(){return{type:g.AG}},w=function(){return{type:g.Gl}},P=n(11878),x=n(66080),Z=n(29439),C=n(52007),O=n.n(C),A=n(45863),j=n(86005),T=n(83388),I=n(10183),_=n(66106),V=n(30914),B=n(36473),M=n(93343),R=(n(45041),n(80184)),E=A.Z.Text,D=j.Z.Search,U=function(e){var t=e.name,n=e.reduxAction,s=(0,u.I0)(),r=(0,u.v9)((function(e){return e.bestbuy})).mostViewedItemsLoading,a=(0,c.useState)(""),o=(0,Z.Z)(a,2),i=o[0],l=o[1];return(0,R.jsx)(D,{placeholder:t,allowClear:!0,enterButton:"Search",size:"large",onSearch:function(e){7===e.split("").filter((function(e){return!isNaN(e)})).length?(l(""),s(n(e))):l("error")},loading:r,status:i})},N=[{key:"allLaptops",label:"All Laptops"},{key:"asusLaptops",label:"Asus Laptops"},{key:"dellLaptops",label:"Dell Laptops"},{key:"hpLaptops",label:"Hp Laptops"},{key:"lenovoLaptops",label:"Lenovo Laptops"},{key:"samsungLaptops",label:"Samsung Laptops"},{key:"microsoftSurfaceLaptops",label:"Surface"},{key:"alsoBoughtOnSku",label:(0,R.jsx)(U,{name:"alsoBoughtOnSku",reduxAction:k})},{key:"ultiBoughtOnSku",label:(0,R.jsx)(U,{name:"ultimatelyBoughtOnSku",reduxAction:S})}],G=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var s;return(0,r.Z)(this,n),(s=t.call(this,e)).handleCardGridClick=function(){},s.handleSelectedMenuKeyChange=function(e){s.setState({selectedMenuKey:e}),s.props.switchContent(e)},s.state={selectedMenuKey:"allLaptops"},s}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.mostViewedItems?this.props.mostViewedItems:[],n=this.state.selectedMenuKey;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(M.BB,{title:"Most Viewed Ultimately Bought"}),(0,R.jsx)(T.Z,{onClick:function(t){return e.handleSelectedMenuKeyChange(t.key)},selectedKeys:[n],mode:"horizontal",items:N}),(0,R.jsx)(I.Z,{active:!0,loading:this.props.loading,children:(0,R.jsx)(_.Z,{gutter:[16,16],children:t.map((function(e,t){return(0,R.jsx)(V.Z,{span:6,children:(0,R.jsx)(B.Z,{className:"most-viewed-cards",hoverable:!0,title:e.names.title,cover:(0,R.jsx)("div",{className:"card-cover",children:(0,R.jsx)("img",{className:"card-image",alt:"laptop",src:e.images.standard})}),children:(0,R.jsx)(B.Z.Meta,{className:"card-content",title:"rank - ".concat(t+1),description:(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(E,{children:["Sku - ",e.sku]}),(0,R.jsx)("br",{}),(0,R.jsxs)(E,{children:["Regular - $",e.prices.regular]}),(0,R.jsx)("br",{}),(0,R.jsxs)(E,{children:["Current - $",e.prices.current]}),(0,R.jsx)("br",{}),(0,R.jsxs)(E,{children:["Score: ",e.customerReviews.averageScore,"    Count: ",e.customerReviews.count]})]})})})},t.toString())}))})})]})}}]),n}(c.Component);G.proppTypes={mostViewedItems:O().array.isRequired,loading:O().bool.isRequired};var Y=(0,u.$j)((function(e){return{mostViewedItems:e.bestbuy.mostViewedItems,loading:e.bestbuy.mostViewedItemsLoading}}),null)(G),q=n(24258),$=n(81776),F={ALL_LAPTOPS:"pcmcat247400050000",ASUS_LAPTOPS:"pcmcat190000050007",DELL_LAPTOPS:"pcmcat140500050010",HP_LAPTOPS:"pcmcat1513015098109",LENOVO_LAPTOPS:"pcmcat230600050000",SAMSUNG_LAPTOPS:"pcmcat1496261338353",SURFACE:"pcmcat1492808199261"},H=function(e){(0,o.Z)(n,e);var t=(0,i.Z)(n);function n(e){var s;return(0,r.Z)(this,n),(s=t.call(this,e)).abortController=void 0,s.cancelRequest=function(){var e;null===(e=s.abortController)||void 0===e||e.abort()},s.switchContent=function(e){var t=void 0;switch(e){case"allLaptops":t=F.ALL_LAPTOPS;break;case"asusLaptops":t=F.ASUS_LAPTOPS;break;case"dellLaptops":t=F.DELL_LAPTOPS;break;case"hpLaptops":t=F.HP_LAPTOPS;break;case"lenovoLaptops":t=F.LENOVO_LAPTOPS;break;case"samsungLaptops":t=F.SAMSUNG_LAPTOPS;break;case"microsoftSurfaceLaptops":t=F.SURFACE;break;default:return void(t=F.ALL_LAPTOPS)}t&&(s.props.getMostViewedOnCategoryId(t),s.setState({mostViewedCatgId:t}))},s.state={items:e.items,loading:e.loading,targetStore:l.v.BESTBUY,mostViewedCatgId:void 0,mostViewedSku:void 0,mostViewedItems:void 0,alsoBoughtItems:void 0},s}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context.socket,n=this.state.targetStore;this.abortController=new AbortController,this.props.getBestbuyDeals(this.abortController.signal),t&&t.active&&(t.emit($.$.subscribe,$.t.dealsRoom),t.on($.$.dealsUpdated,(function(){var t;e.props.getBestbuyDeals(null===(t=e.abortController)||void 0===t?void 0:t.signal)})),t.on($.$.retrievedBBItemsOnlinePrice,(function(t){console.log(e.state.targetStore,t),e.props.handlePriceCrawlFinished(n)})),t.on($.$.retrievedMSItemsOnlinePrice,(function(t){console.error(n,t),e.props.handlePriceCrawlError(n)})))}},{key:"componentWillUnmount",value:function(){var e=this.context.socket;e&&e.removeAllListeners(),this.cancelRequest()}},{key:"render",value:function(){var e={storeName:this.state.targetStore,items:this.state.items,loading:this.state.loading},t=(0,s.Z)((0,s.Z)({},this.state),{},{switchContent:this.switchContent});return(0,R.jsxs)(M.Dv,{children:[(0,R.jsx)(x.ZP,(0,s.Z)({},e)),(0,R.jsx)(Y,(0,s.Z)({},t))]})}}]),n}(c.Component);H.contextType=P.J;var K={getBestbuyDeals:function(e){return function(){var t=(0,d.Z)((0,p.Z)().mark((function t(n,r){return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(b()),m.Z.get("/api/bestbuy/v1/deals",(0,s.Z)({signal:e},(0,y.Y2)(r))).then((function(e){var t=Object.values(e.data).map((function(e){return e.captureDate=f()(e.captureDate).format("MM-DD-YYYY HH:mm:ss"),e}));n({type:g.Aq,payload:t})})).catch((function(e){if("CanceledError"===e.name)console.log("Request canceled",e.name);else{var t=e;n((0,v.d)(t.response.data.msg,t.response.status))}}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},getAlsoBoughtOnSku:k,getMostViewedOnCategoryId:function(e){return function(){var t=(0,d.Z)((0,p.Z)().mark((function t(n,s){return(0,p.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(L()),console.log("Get most viewed request sent..."),m.Z.get("/api/bestbuy/peek/v0/getMostViewed/categoryId/".concat(e),(0,y.Y2)(s)).then((function(e){n({type:g.uV,payload:e.data})})).catch((function(e){n(w()),n((0,v.d)(e.response.data.msg,e.response.status,g.Gl))}));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},getViewedUltimatelyBoughtOnSku:S,handlePriceCrawlFinished:q.Q,handlePriceCrawlError:q.HA},W=(0,u.$j)((function(e){return{tableState:e.item.tableState,loading:e.bestbuy.loading,items:e.bestbuy.items,mostViewedItems:e.bestbuy.mostViewedItems}}),K)(H)},80888:function(e,t,n){"use strict";var s=n(79047);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,o){if(o!==s){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},52007:function(e,t,n){e.exports=n(80888)()},79047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}]);
//# sourceMappingURL=570.b2850d3c.chunk.js.map