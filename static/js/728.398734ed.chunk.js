"use strict";(self.webpackChunkmern_project=self.webpackChunkmern_project||[]).push([[728],{36634:function(t,e,r){r.r(e),r.d(e,{default:function(){return j}});var n=r(1413),o=r(15671),i=r(43144),s=r(60136),a=r(27277),c=r(72791),u=r(78687),l=r(11878),p=r(66080),f=r(97988),m=r(24258),h=r(74165),d=r(15861),v=r(31243),g=r(72426),S=r.n(g),k=r(6803),D=r(34219),Z=function(){return{type:k.Df}},b=r(81776),M=r(93343),w=r(80184),y=function(t){(0,s.Z)(r,t);var e=(0,a.Z)(r);function r(t){var n;return(0,o.Z)(this,r),(n=e.call(this,t)).state={targetStore:f.v.MICROSOFT},n}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){var t=this,e=this.context.socket,r=this.state.targetStore;this.props.getMicrosoftDeals(),e&&e.active&&(e.emit("subscribe","StoreListingRoom"),e.on("Store Listings Update",(function(){t.props.getMicrosoftDeals()})),e.on(b.$.retrievedMSItemsOnlinePrice,(function(e){console.log(r,e),t.props.handlePriceCrawlFinished(r)})),e.on(b.$.retrievedMSItemsOnlinePriceErr,(function(e){t.props.handlePriceCrawlError(r)})))}},{key:"componentWillUnmount",value:function(){var t=this.context.socket;t&&t.emit("unsubscribe","StoreListingRoom")}},{key:"render",value:function(){var t={storeName:this.state.targetStore,items:this.props.items,loading:this.props.loading};return(0,w.jsx)(M.Dv,{children:(0,w.jsx)(p.ZP,(0,n.Z)({},t))})}}]),r}(c.Component);y.contextType=l.J;var C=(0,u.$j)((function(t){return{items:t.microsoft.items,tableState:t.item.tableState,loading:t.microsoft.loading}}),{getMicrosoftDeals:function(){return function(){var t=(0,d.Z)((0,h.Z)().mark((function t(e,r){return(0,h.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(Z()),v.Z.get("/api/microsoft/v1/deals",(0,D.Y2)(r)).then((function(t){var r=Object.values(t.data).map((function(t){return t.captureDate=S()(t.captureDate).format("MM-DD-YYYY HH:mm:ss"),t}));e({type:k.jp,payload:r})}));case 2:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()},handlePriceCrawlFinished:m.Q,handlePriceCrawlError:m.HA}),j=C(y)}}]);
//# sourceMappingURL=728.398734ed.chunk.js.map